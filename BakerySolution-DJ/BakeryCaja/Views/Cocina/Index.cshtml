@model List<BakeryCaja.Models.Product>
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="utf-8" />
    <title>Cocina - Pan y Lujo</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🥐</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = { darkMode: 'class', theme: { extend: { colors: { choco: { 900: '#1a0f0a', 800: '#2d1b14', 700: '#4a2c21', 600: '#5d3a2e' }, cream: { 100: '#fffbf0', 200: '#ffefd5', 300: '#ffe0b2' }, gold: '#ffc107', bread: '#d97706' } } } }
    </script>
</head>
<body class="bg-cream-100 dark:bg-choco-900 text-gray-800 dark:text-gray-100 min-h-screen p-8 font-sans transition-colors duration-300">

    <div class="max-w-6xl mx-auto flex justify-between items-center mb-8 bg-white dark:bg-choco-800 p-6 rounded-3xl shadow-xl border border-gold/30">
        <div class="flex items-center gap-4">
            <div class="bg-gold p-3 rounded-2xl text-choco-900 shadow-lg"><i class="fas fa-fire-burner text-3xl"></i></div>
            <div><h1 class="text-3xl font-black text-bread dark:text-gold uppercase" data-i18n="titleKit">Cocina</h1><p class="text-sm opacity-60" data-i18n="descKit">Producción</p></div>
        </div>
        <div class="flex items-center gap-3">
            <button onclick="toggleTheme()" class="w-10 h-10 rounded-full bg-cream-200 dark:bg-choco-700 hover:scale-110 transition flex items-center justify-center text-lg"><span id="theme-icon">🍫</span></button>
            <button id="btn-lang" onclick="toggleLang()" class="w-10 h-10 rounded-full bg-cream-200 dark:bg-choco-700 hover:scale-110 transition flex items-center justify-center font-bold text-xs mr-4"><span id="lang-label">EN</span></button>
            <a href="/Access/Logout" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition"><i class="fas fa-sign-out-alt"></i></a>
        </div>
    </div>

    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @foreach (var p in Model)
        {
            string stockBg = p.Stock < 10 ? "bg-red-100 dark:bg-red-900/20 text-red-500" : "bg-green-100 dark:bg-green-900/20 text-green-500";
            <div class="bg-white dark:bg-choco-800 rounded-2xl p-6 shadow-lg border-l-8 border-bread flex flex-col justify-between hover:shadow-2xl transition duration-300">
                <div class="flex justify-between items-start mb-4"><div><h2 class="text-xl font-bold leading-tight">@p.Name</h2></div><div class="text-center @stockBg px-4 py-2 rounded-xl"><div class="text-xs uppercase font-bold opacity-70">Stock</div><div class="text-3xl font-black">@p.Stock</div></div></div>
                <form action="/Cocina/Hornear" method="post" class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700"><input type="hidden" name="id" value="@p.Id" /><label class="text-xs font-bold uppercase opacity-60 mb-1 block" data-i18n="lblBake">Hornear / Reponer:</label><div class="flex gap-2"><input type="number" name="cantidad" value="10" min="1" class="w-20 bg-gray-50 dark:bg-choco-900 border border-gray-200 dark:border-choco-600 rounded-lg text-center font-bold text-lg outline-none focus:border-gold py-2" /><button type="submit" class="flex-1 bg-bread hover:bg-orange-600 text-white font-bold rounded-lg py-2 shadow transition transform active:scale-95 flex items-center justify-center gap-2"><i class="fas fa-plus-circle"></i> <span data-i18n="btnAdd">Agregar</span></button></div></form>
            </div>
        }
    </div>

    <script>
        let lang = localStorage.getItem('bakeryLang') || 'en';
        const i18n = {
            en: { titleKit: "Kitchen", descKit: "Production Management", lblBake: "Bake / Restock", btnAdd: "Add" },
            es: { titleKit: "Cocina", descKit: "Gestión de Producción", lblBake: "Hornear / Reponer", btnAdd: "Agregar" },
            fr: { titleKit: "Cuisine", descKit: "Gestion Production", lblBake: "Cuire / Réapprovisionner", btnAdd: "Ajouter" }
        };
        document.addEventListener('DOMContentLoaded', () => { initTheme(); setLang(lang); });
        function toggleLang() { const langs = ['en', 'es', 'fr']; let idx = langs.indexOf(lang); lang = langs[(idx + 1) % 3]; setLang(lang); }
        function setLang(l) { lang = l; localStorage.setItem('bakeryLang', l); document.getElementById('lang-label').innerText = l.toUpperCase(); document.querySelectorAll('[data-i18n]').forEach(el => { if(i18n[l][el.dataset.i18n]) el.innerText = i18n[l][el.dataset.i18n]; }); }
        function initTheme() { if(localStorage.getItem('theme')==='light'){document.documentElement.classList.remove('dark');document.getElementById('theme-icon').innerText='🍦';}else{document.documentElement.classList.add('dark');document.getElementById('theme-icon').innerText='🍫';} }
        function toggleTheme() { if(document.documentElement.classList.contains('dark')){document.documentElement.classList.remove('dark');localStorage.setItem('theme','light');document.getElementById('theme-icon').innerText='🍦';}else{document.documentElement.classList.add('dark');localStorage.setItem('theme','dark');document.getElementById('theme-icon').innerText='🍫';} }
    </script>
</body>
</html>

